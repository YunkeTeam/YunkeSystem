<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.titos.studentinfosystem.dao.StudentDao">
    <resultMap id="BaseResult" type="com.titos.personalmanagement.model.User">
        <id column="id" property="id" jdbcType="NUMERIC"/>
        <result column="username" property="username" jdbcType="CHAR"/>
        <result column="password" property="password" jdbcType="VARCHAR"/>
        <result column="gender" property="gender" jdbcType="VARCHAR"/>
        <result column="email" property="email" jdbcType="VARCHAR"/>
        <result column="person_type" property="personType" jdbcType="INTEGER"/>
        <result column="head_image" property="headImage" jdbcType="VARCHAR"/>
        <result column="birthday" property="birthday" jdbcType="DATE"/>
        <result column="phone" property="phone" jdbcType="VARCHAR"/>
        <result column="registry_time" property="registryTime" jdbcType="DATE"/>
    </resultMap>
    <sql id="Base_Column_List">
        id, username, password, gender, email, person_type, head_image, birthday, phone, registry_time
    </sql>
    <insert id="addNewUser" useGeneratedKeys="true" keyProperty="id">
        insert into user(username, password, email, person_type, registry_time) values(#{username}, #{password}, #{email}, #{personType}, #{registryTime});
    </insert>
    <select id="selectIdDynamic" resultType="java.lang.Integer">
        select id from user
        <where>
            <choose>
                <when test="username != null and username != ''">
                    and username=#{username,jdbcType=VARCHAR}
                </when>
                <when test="email != null and email != ''">
                    and email=#{email,jdbcType=VARCHAR}
                </when>
            </choose>
        </where>
    </select>
</mapper>